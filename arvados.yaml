# Main playbook to deploy an Arvados cluster
- hosts: all
  sudo_user: "root"
  roles:
      - arvados

- hosts: sso
  sudo_user: "root"
  roles:
      - { role: rvm_io.rvm1-ruby, tags: ruby, sudo: True }
      - postgres
      - passenger
      - arvados-sso

- hosts: workbench
  sudo_user: "root"
  vars_files:
      - roles/arvados-sso/vars/main.yaml
  roles:
      - rvm_io.rvm1-ruby
      - postgres
      - passenger
      - arvados-api
      - arvados-git
